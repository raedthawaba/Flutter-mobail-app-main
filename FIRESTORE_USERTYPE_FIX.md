# ๐ง ุฅุตูุงุญ ูุดููุฉ userType ูู Firestore

## ๐ **ููุฎุต ุงููุดููุฉ:**

ุนูุฏูุง ููุช ุจุชุบููุฑ ุงุณู ุงูุญูู ูู `role` ุฅูู `userType` ูู Firestoreุ ุงูุชุทุจูู ูุงู ูุชุนุทู ูุฃู:

1. **ุงููููุฉ ุบูุฑ ููุฌูุฏุฉ ุฃู ูุงุฑุบุฉ** ูู ุญูู `userType`
2. **ุนุฏู ุงูุชูุงูู** ุจูู ุงูุจูุงูุงุช ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ
3. **ุนุฏู ูุฌูุฏ ูุนุงูุฌุฉ ููุฃุฎุทุงุก** ุนูุฏ ูุฑุงุกุฉ ุงูุจูุงูุงุช

---

## โ **ูุง ุชู ุฅุตูุงุญู:**

### 1. **ุชุญุณูู ูุฑุงุกุฉ userType ูู Firestore:**

ุงูููุฏ ุงูุขู ููุฑุฃ ูู **ุซูุงุซุฉ ูุตุงุฏุฑ ูุญุชููุฉ** ุจุงูุชุฑุชูุจ:
- `user_type` (snake_case)
- `userType` (camelCase)
- `role` (ููุชูุงูู ูุน ุงูุจูุงูุงุช ุงููุฏููุฉ)

### 2. **ูุนุงูุฌุฉ ุงูููู ุงููุงุฑุบุฉ:**

ุฅุฐุง ูุงู ุงูุญูู ูุงุฑุบูุง ุฃู ุบูุฑ ููุฌูุฏุ ูุชู ุชุนููู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ: `"regular"`

### 3. **ุชุญููู ุงูููู ุงูุชููุงุฆู:**

ุงูููุฏ ูุญูู ุงูููู ุชููุงุฆููุง:
- `"admin"` โ `"admin"`
- `"regular"`, `"user"` โ `"regular"`
- ุฃู ูููุฉ ุฃุฎุฑู โ `"regular"`

### 4. **ุชุญุณูู ุฑุณุงุฆู ุงูุฃุฎุทุงุก:**

ุชู ุฅุถุงูุฉ ุฑุณุงุฆู debug ููุตูุฉ ูุชุชุจุน ุงููุดููุฉ ุจุณูููุฉ.

---

## ๐จ **ุงูุฎุทูุงุช ุงููุทููุจุฉ ููู ุงูุขู:**

### **ุงูุฎุทูุฉ 1: ุชุตุญูุญ ุงูุจูุงูุงุช ูู Firestore**

#### ุงูุชุญ Firebase Console:
1. ุงุฐูุจ ุฅูู [Firebase Console](https://console.firebase.google.com/)
2. ุงูุชุญ ูุดุฑูุนู
3. ุงุฐูุจ ุฅูู **Firestore Database**
4. ุงูุชุญ collection **users**
5. ุงูุชุญ ุงููุณุชูุฏ ุงูุฎุงุต ุจุญุณุงุจ ุงูุฃุฏูู ุงูุฎุงุต ุจู

#### ุชุฃูุฏ ูู ุงูุญููู ุงูุชุงููุฉ:

**ูุฌุจ ุฃู ุชููู ุงูุจูุงูุงุช ุจูุฐุง ุงูุดูู:**

```json
{
  "email": "admin@example.com",
  "username": "admin",
  "fullName": "ุงุณู ุงููุฏูุฑ",
  "userType": "admin",           โ **ููู ุฌุฏุงู: ูุฌุจ ุฃู ุชููู "admin" ุจุญุฑูู ุตุบูุฑุฉ**
  "phoneNumber": "+970...",
  "createdAt": 1234567890,
  "lastLogin": 1234567890
}
```

**โ๏ธ ููุงุญุธุงุช ูููุฉ:**
- ุงูุญูู ูุฌุจ ุฃู ูููู `userType` (ูููุณ `role`)
- ุงููููุฉ ูุฌุจ ุฃู ุชููู `"admin"` ุจุงูุถุจุท (ุจุญุฑูู ุตุบูุฑุฉ)
- ุฅุฐุง ูุงู ููุงู ุญูู `role` ูุฏููุ ููููู ุญุฐูู

---

### **ุงูุฎุทูุฉ 2: ุจูุงุก ุงูุชุทุจูู ุงูุฌุฏูุฏ**

#### ุนูู Codemagic:
1. ุงุฐูุจ ุฅูู Codemagic
2. ุงุจุฏุฃ **ุจูุงุก ุฌุฏูุฏ** ูู branch `main`
3. ุงูุชุธุฑ ุญุชู ููุชูู ุงูุจูุงุก ุจูุฌุงุญ โ

---

### **ุงูุฎุทูุฉ 3: ุชุซุจูุช ุงูุชุทุจูู**

#### **โ๏ธ ููู ุฌุฏุงู: ุงุญุฐู ุงูุชุทุจูู ุงููุฏูู ุฃููุงู**

1. **ุงุญุฐู ุงูุชุทุจูู ุงููุฏูู ุชูุงูุงู** ูู ุฌูุงุฒู
2. **ุฃุนุฏ ุชุดุบูู ุงูุฌูุงุฒ** (ุงุฎุชูุงุฑู ูููู ููุตู ุจู)
3. **ุซุจูุช ุงููุณุฎุฉ ุงูุฌุฏูุฏุฉ** ูู Codemagic

---

### **ุงูุฎุทูุฉ 4: ุงูุชุญูู ูู ุงูุณุฌูุงุช (Logs)**

ุนูุฏ ูุชุญ ุงูุชุทุจููุ ุณูุทุจุน ุฑุณุงุฆู debug ูู ุงูุณุฌูุงุช:

```
=== DEBUG: Checking auth status ===
DEBUG: isLoggedIn = true
DEBUG: isAdmin = true
DEBUG: Getting user by UID: xxxxx
DEBUG: Raw Firestore data: {...}
DEBUG: Current user email = admin@example.com
DEBUG: Current user userType = admin
DEBUG: Navigating to Admin Dashboard
```

#### ููู ุชุดุงูุฏ ุงูุณุฌูุงุช:

**ุนูู Android:**
1. ูุตูู ุงูุฌูุงุฒ ุจุงูููุจููุชุฑ
2. ุงูุชุญ Terminal
3. ููุฐ ุงูุฃูุฑ: `adb logcat | grep DEBUG`

**ุฃู ุงุณุชุฎุฏู Codemagic Build Logs:**
- ุดุงูุฏ ุณุฌูุงุช ุงูุจูุงุก ุนูู Codemagic ููุชุญูู ูู ุนุฏู ูุฌูุฏ ุฃุฎุทุงุก

---

## ๐ฏ **ุงูููู ุงูุตุญูุญุฉ ูู userType:**

| ููุน ุงููุณุชุฎุฏู | ุงููููุฉ ูู Firestore |
|--------------|---------------------|
| ูุฏูุฑ (Admin) | `"admin"` |
| ูุณุชุฎุฏู ุนุงุฏู  | `"regular"` |

---

## ๐ **ููููุฉ ุงูุชุญูู ูู ูุฌุงุญ ุงูุฅุตูุงุญ:**

### โ **ุนูุงูุงุช ุงููุฌุงุญ:**
1. ุงูุชุทุจูู ููุชุญ **ุจุฏูู ุฑุณุงูุฉ ุฎุทุฃ**
2. ุฅุฐุง ููุช ุฃุฏููุ ุณุชุฑู **ููุญุฉ ุชุญูู ุงููุฏูุฑ**
3. ุฅุฐุง ููุช ูุณุชุฎุฏู ุนุงุฏูุ ุณุชุฑู **ููุญุฉ ุชุญูู ุงููุณุชุฎุฏู**
4. ููููู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ

### โ **ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:**

1. **ุงูุชูุท ููุทุฉ ุดุงุดุฉ** ูู:
   - ุฑุณุงูุฉ ุงูุฎุทุฃ
   - ุจูุงูุงุช ุงููุณุชุฎุฏู ูู Firestore Console
   - ุณุฌูุงุช ุงูุจูุงุก ูู Codemagic

2. **ุฃุฑุณู ูู:**
   - ููุทุงุช ุงูุดุงุดุฉ
   - ูุต ุงูุณุฌูุงุช (logs)

---

## ๐ **ููุฎุต ุงูุชุบููุฑุงุช ูู ุงูููุฏ:**

### ุงููููุงุช ุงูููุนุฏููุฉ:

1. **`lib/models/user.dart`**:
   - ุฅุถุงูุฉ ูุนุงูุฌุฉ ุฐููุฉ ููุฑุงุกุฉ `userType` ูู ุนุฏุฉ ูุตุงุฏุฑ
   - ุฅุถุงูุฉ ุชุญููู ุชููุงุฆู ููููู
   - ูุนุงูุฌุฉ ุงูููู ุงููุงุฑุบุฉ

2. **`lib/screens/splash_screen.dart`**:
   - ุฅุถุงูุฉ ุฑุณุงุฆู debug ููุตูุฉ
   - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

3. **`lib/services/firestore_service.dart`**:
   - ุฅุถุงูุฉ ุฑุณุงุฆู debug ูุชุชุจุน ูุฑุงุกุฉ ุงูุจูุงูุงุช
   - ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

---

## ๐ **ุงูุฎุทูุฉ ุงูุชุงููุฉ:**

1. โ **ุตุญุญ ุงูุจูุงูุงุช ูู Firestore** (ุชุฃูุฏ ูู ุฃู `userType = "admin"`)
2. โ **ุงุจูู ุงูุชุทุจูู ุนูู Codemagic** ูู branch `main`
3. โ **ุงุญุฐู ุงูุชุทุจูู ุงููุฏูู ูุซุจูุช ุงูุฌุฏูุฏ**
4. โ **ุฃุฎุจุฑูู ุจุงููุชูุฌุฉ!**

---

**ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ! ๐**

*MiniMax Agent*
